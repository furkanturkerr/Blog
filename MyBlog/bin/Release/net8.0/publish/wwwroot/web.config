<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <location path="." inheritInChildApplications="false">
        <system.webServer>
            <!-- ASP.NET Core Module -->
            <handlers>
                <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
            </handlers>
      
            <!-- ASP.NET Core ayarları -->
            <aspNetCore processPath="dotnet" 
                        arguments=".\MyBlog.dll" 
                        stdoutLogEnabled="true" 
                        stdoutLogFile=".\logs\stdout" 
                        hostingModel="inprocess">
                <environmentVariables>
                    <environmentVariable name="ASPNETCORE_ENVIRONMENT" value="Production" />
                </environmentVariables>
            </aspNetCore>
      
            <!-- Güvenlik ayarları -->
            <security>
                <authentication>
                    <anonymousAuthentication enabled="true" />
                    <windowsAuthentication enabled="false" />
                </authentication>
                <authorization>
                    <remove users="*" roles="" verbs="" />
                    <add accessType="Allow" users="*" />
                </authorization>
            </security>
      
            <!-- URL Rewrite (isteğe bağlı) -->
            <rewrite>
                <rules>
                    <rule name="Angular Routes" stopProcessing="true">
                        <match url=".*" />
                        <conditions logicalGrouping="MatchAll">
                            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                        </conditions>
                        <action type="Rewrite" url="/" />
                    </rule>
                </rules>
            </rewrite>
      
            <!-- Error handling -->
            <httpErrors errorMode="Detailed" />
      
        </system.webServer>
    </location>
</configuration>